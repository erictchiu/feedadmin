<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="Content-Style-Type" content="text/css" />
	<link rel="stylesheet" type="text/css" media="screen"  href="doc.css" />
	<!--[if IE]>
		<link rel='stylesheet' type='text/css' media='screen'  href='docIE.css' />
	<![endif]-->
	<title>Recent comments</title>
</head> 

<body> 
<div id="wrapper">
	<div id="header">
		<strong>TalkBack User Guide<br />Recent Comments</strong><br />
	</div>
	<div id="inner">
	
	<p class='center'><a href="index.html">Table of Contents</a></p>
	
	<p>If you only have one comments page, e.g. a guestbook, this is of no interest to you. It is intended for sites that have multiple pages on which there are comments. This addon creates a list of the n most recent comments from all of your comments pages. <a href='rc-capture.gif'>screen capture</a></p>

<p>The scripts are in /addons/recent-comments. Upload the three scripts to your TalkBack directory.  Browse to yoursite.com/talkback/comments/recent-comments.php and you should see a list of your recent comments.</p>

<p>You can then customize the styles and template to fit your site layout.</p>

<p><b>recent-comments.php</b></p>

<p>An example recent comments page. It is a mockup of the page that would be the target of your link to recent comments. Edit it to add your page heading, sidebars, etc.</p>

<p>Include the TalkBack stylesheet links in your page just like you did for your guestbook/comments pages.  You need to add two new styles, <code>.tb-page-legend</code> and <code>.tb-page-url</code>, which can be in a &lt;style&gt; tag in the &lt;head&gt; section or you may want to add them to the TalkBack style sheet.</p>

<p>If you want the styles on the recent comments page to be different than the
styles on the original comments page, you can override the stylesheet styles by putting them
in a &lt;style&gt; tag in your recent-comments.php page.</p>

<p><b>recent.php</b></p>

<p>Selects, formats and prints the comments. You may want to edit the configuration variables at the beginning of the script. But don&rsquo;t change anything below thoes unless you are experienced with PHP.</p>

<pre>
$num_comments   = 15;                   // Number of comments to select
$page_legend    = 'Comments on page:';  // precedes page url on the list, e.g. Comments on page: /guestbook.php
$subject_title  = 'Subject:';           // precedes the comment subject
$groupby_page   = 'N';                  // Y = list is sorted by page ascending, date descending
                                        // N = list is sorted by date descending
$show_link      = 0;                    // 1 = always show the page link
                                        // 0 = only if it is different from the comment above

// Convert page URL's to a page name
$conv_table =      array(
                  );

// Exclude comments on specified pages
$exclude_page =   array(
                     '/talkback/test.php',
                  );

// Exclude comments on all pages in specified directories
$exclude_dir =      array(
                  );
                  
/* +++++++++++++++++++++++++++++ Examples +++++++++++++++++++++++++++++
$conv_table =      array(
                     '/guestbook.php'      => 'Guestbook',
                     '/dir1/comments.php'  => 'Some name',
                     '/dir2/index.php'     => 'Another name',
                  );

$exclude_dir =      array(
                     '/dir1/',
                     '/dir1/dir1/',
                  );
   ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
*/
</pre>

<p><code>$num_comments</code> is the maximum number of comments that will be listed.</p>
<p><code>$page_legend</code> will be placed in front of the page name or URL.</p>
<p><code>$subject_title</code> will be placed before the subject field if you are using the subject field.</p>
<p><code>$groupby_page</code> If set to 1, the list will be sorted by page URL ascending / date/time descending. If set to 0, it is sorted by date/time descending.</p>
<p><code>$show_page</code> If set to 1, the page link will always be shown. If set to 0, it is shown only if it is different from the comment above it.</p>
<p>Entries in <code>$conv_table</code> cause the comment page URL to be replaced with a name of your choice.</p>
<p>Comments for page URL&rsquo;s in <code>$exclude_page</code> will not appear in the listing.</p>
<p>Comments on all pages for directories specified in <code>$exclude_dir</code> will not appear in the listing.</p>

<p><b>recent-tpl.php</b></p>

<p>This is the comments template. Look familiar? It should. It is essentially the same as in comments-display-tpl.php. You can rearrange the layout, change class names, etc.</p>
	</div>
	<div id="footer">Powered by <a href='http://www.scripts.oldguy.us'>TalkBack</a></div>
</div>
</body>
</html>